<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ממיר מטבע, מחירי טיסות ולינה</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            margin: auto;
        }
        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }
        footer {
            margin-top: 20px;
            font-size: 14px;
            color: #888;
        }
        body { margin: 0; overflow: hidden; }
        #exchangeRates {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.8);
            padding: 10px;
            border-radius: 5px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>המרת מטבע</h2>
        <input type="number" id="amount" placeholder="הזן סכום">
        <select id="currency">
            <option value="usd">דולר ($)</option>
            <option value="eur">יורו (€)</option>
        </select>
        <button onclick="convertCurrency()">המר</button>
        <p id="result"></p>
    </div>

    <div class="container">
        <h2>חיפוש טיסות</h2>
        <input type="text" id="destination" placeholder="בחר יעד">
        
        <select id="airline">
            <option value="all">בחר חברת תעופה</option>
            <option value="אל על">אל על</option>
            <option value="ריינאייר">ריינאייר</option>
            <option value="אייר פראנס">אייר פראנס</option>
            <option value="טורקיש איירליינס">טורקיש איירליינס</option>
            <option value="לופטהנזה">לופטהנזה</option>
            <option value="וויז אייר">וויז אייר</option>
        </select>

        <input type="number" id="passengerCount" placeholder="כמות נוסעים" min="1">
        <button onclick="calculateFlights()">חשב מחירי טיסות</button>
        <ul id="flightPrices"></ul>
        <p id="finalPrice"></p> 
    </div>

    <div class="container">
        <h2>חיפוש לינה</h2>
        <input type="text" id="accommodationDestination" placeholder="בחר יעד לינה">
        <button onclick="fetchAccommodationPrices()">חפש לינה</button>
        <ul id="accommodationList"></ul>
    </div>

    <div id="exchangeRates">
        <p>שער USD: <span id="usdRate">...</span></p>
        <p>שער EUR: <span id="eurRate">...</span></p>
    </div>

    <script>
        // --- חלק של עדכון שערי חליפין ---
        async function fetchExchangeRates() {
            try {
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                const data = await response.json();
                document.getElementById('usdRate').textContent = data.rates.USD;
                document.getElementById('eurRate').textContent = data.rates.EUR;
            } catch (error) {
                console.error('שגיאה בקבלת שערי החליפין:', error);
            }
        }

        // קריאה ראשונית ועדכון כל 5 שניות
        fetchExchangeRates();
        setInterval(fetchExchangeRates, 5000);

        // --- לוגיקה להמרת מטבע ---
        const rates = { usd: 3.56, eur: 3.73 };
        function convertCurrency() {
            let amount = document.getElementById("amount").value;
            let currency = document.getElementById("currency").value;
            if (!amount || isNaN(amount)) {
                alert("נא להזין סכום תקין");
                return;
            }
            let converted = (amount * rates[currency]).toFixed(2);
            document.getElementById("result").innerText = `תוצאה: ${converted} ₪`;
        }

        // --- לוגיקה למחירי טיסות ---
        const countrySurcharges = {
            "ישראל": 1.0,
            "בריטניה": 1.15,
            "הולנד": 1.10,
            "גרמניה": 1.08,
            "צרפת": 1.05,
            "ספרד": 1.20,
            "יפן": 1.18,
            "ארצות הברית": 1.12,
            "קנדה": 1.14,
            "איטליה": 1.09,
            "סין": 1.22,
            "אוסטרליה": 1.25,
            "הודו": 1.30,
            "ברזיל": 1.28,
            "רוסיה": 1.35,
            "דרום אפריקה": 1.32,
            "מקסיקו": 1.27,
            "קוריאה הדרומית": 1.21,
            "טורקיה": 1.19,
            "שוודיה": 1.11,
            "נורווגיה": 1.13,
            "פינלנד": 1.10,
            "דנמרק": 1.12,
            "שווייץ": 1.07,
            "יוון": 1.16,
            "פורטוגל": 1.15,
            "פולין": 1.14,
            "צ'כיה": 1.13,
            "הונגריה": 1.12,
            "אוסטריה": 1.10,
            "בלגיה": 1.09,
            "ניו זילנד": 1.26,
            "תאילנד": 1.30,
            "ארגנטינה": 1.18,
            "צ'ילה": 1.25,
            "פנמה": 1.20
        };
        
        const airlines = [
            { name: "אל על", basePrice: 320 },
            { name: "ריינאייר", basePrice: 270 },
            { name: "אייר פראנס", basePrice: 300 },
            { name: "טורקיש איירליינס", basePrice: 350 },
            { name: "לופטהנזה", basePrice: 380 },
            { name: "וויז אייר", basePrice: 250 }
        ];

        function calculateFlights() {
            let destination = document.getElementById("destination").value;
            let airlineChoice = document.getElementById("airline").value;
            let passengerCount = document.getElementById("passengerCount").value || 1;
            let list = document.getElementById("flightPrices");
            let finalPriceElement = document.getElementById("finalPrice");
            list.innerHTML = "";
            finalPriceElement.innerHTML = "";

            if (!destination || !countrySurcharges[destination]) {
                alert("נא לבחור יעד תקני");
                return;
            }

            let surcharge = countrySurcharges[destination];
            let totalPrice = 0;

            airlines.filter(airline => airlineChoice === "all" || airline.name === airlineChoice).forEach(airline => {
                let price = (airline.basePrice * surcharge * passengerCount).toFixed(2);
                let li = document.createElement("li");
                li.innerText = `${airline.name}: ${price} ₪`;
                list.appendChild(li);
                totalPrice += parseFloat(price);
            });

            finalPriceElement.innerText = `המחיר הכולל: ${totalPrice.toFixed(2)} ₪`;
        }

        // --- לוגיקה למחירי לינה ---
        async function fetchAccommodationPrices() {
            try {
                const destination = document.getElementById("accommodationDestination").value;
                if (!destination) {
                    alert("נא להזין יעד לינה");
                    return;
                }

                const response = await fetch(`https://api.example.com/accommodation?destination=${destination}`);
                const data = await response.json();

                const accommodationList = document.getElementById('accommodationList');
                accommodationList.innerHTML = ''; 

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.name}: ${item.price} ₪`;
                    accommodationList.appendChild(li);
                });
            } catch (error) {
                console.error('שגיאה בקבלת מחירים של לינה:', error);
            }
        }
    </script>

    <footer>
        <p>By itapita's site</p>
    </footer>
</body>
</html>
